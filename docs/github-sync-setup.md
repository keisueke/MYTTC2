# GitHub同期セットアップガイド

## 概要

GitHubリポジトリにデータを保存することで、複数デバイス間でデータを同期できます。

## 必要なもの

- GitHubアカウント
- Personal Access Token（PAT）

## セットアップ手順

### Step 1: GitHubアカウントの準備

GitHubアカウントがない場合は、[github.com](https://github.com) で作成してください。

### Step 2: データ保存用リポジトリの作成

1. GitHubにログイン
2. 右上の「+」→「New repository」をクリック
3. 以下を設定:
   - **Repository name**: `mytcc2-data`（任意の名前）
   - **Description**: `MYTTC2 data storage`（任意）
   - **Visibility**: `Private`（推奨）
   - **Initialize this repository with**: 何もチェックしない
4. 「Create repository」をクリック

### Step 3: Personal Access Token（PAT）の取得

1. GitHubにログイン
2. 右上のプロフィールアイコン → 「Settings」
3. 左メニューの一番下「Developer settings」
4. 「Personal access tokens」→「Tokens (classic)」
5. 「Generate new token」→「Generate new token (classic)」
6. 以下を設定:
   - **Note**: `MYTTC2 sync`（任意のメモ）
   - **Expiration**: `No expiration`（推奨）または任意の期限
   - **Select scopes**: `repo` にチェック（リポジトリへのフルアクセス）
7. 「Generate token」をクリック
8. **表示されたトークンをコピーして保存**（この画面を閉じると二度と表示されません）

### Step 4: アプリでの設定

1. MYTTC2アプリを開く
2. 「Settings」ページに移動
3. 「GitHub設定」セクションを見つける
4. 以下を入力:

| 項目 | 入力値 |
|------|--------|
| **GitHub Token** | Step 3でコピーしたトークン |
| **リポジトリ所有者** | あなたのGitHubユーザー名 |
| **リポジトリ名** | Step 2で作成したリポジトリ名（例: `mytcc2-data`） |
| **データパス** | `data/tasks.json`（デフォルトのまま） |

5. 「保存」をクリック
6. 設定が正しければ「✅ GitHub設定が有効です」と表示されます

### Step 5: 同期の実行

1. 「同期」ボタンをクリック
2. 初回は「リモートにデータを保存しました」と表示されます
3. 以降は自動的にデータが同期されます

## 使い方

### 手動同期

Settings画面の「同期」ボタンをクリックすると、ローカルとリモートのデータを同期します。

### 競合の解決

複数デバイスで同時に編集した場合、競合が発生することがあります。

競合が発生すると、ダイアログが表示されます:
- **ローカルを優先**: 今使っているデバイスのデータで上書き
- **リモートを優先**: GitHubに保存されているデータで上書き

## トラブルシューティング

### 「GitHub設定の検証に失敗しました」と表示される

1. **トークンが正しいか確認**
   - コピー時に余分な空白が入っていないか
   - トークンの有効期限が切れていないか

2. **リポジトリ情報が正しいか確認**
   - ユーザー名とリポジトリ名にタイプミスがないか
   - リポジトリが存在するか

3. **トークンのスコープを確認**
   - `repo` スコープが有効になっているか

### 「同期に失敗しました」と表示される

1. インターネット接続を確認
2. GitHubがダウンしていないか確認（[githubstatus.com](https://www.githubstatus.com/)）
3. トークンの有効期限を確認

### データが同期されない

1. 「同期」ボタンを手動でクリック
2. ブラウザのコンソールでエラーを確認（F12 → Console）

## セキュリティについて

### トークンの管理

- トークンは**絶対に他人と共有しない**でください
- トークンはブラウザのLocalStorageに保存されます
- 共有PCでは使用後にログアウト（設定を削除）してください

### リポジトリの公開設定

- **Private推奨**: データを自分だけが見られるようにする
- Publicにすると、誰でもデータを見られます

### トークンの権限

- `repo` スコープのみで十分です
- 不要な権限は付与しないでください

## よくある質問

### Q: トークンの有効期限はどうすればいい？

個人利用なら「No expiration」（無期限）で問題ありません。セキュリティを重視する場合は90日などに設定し、定期的に更新してください。

### Q: リポジトリはPublicでもいい？

データが公開されても問題なければPublicでも動作します。ただし、タスクの内容などが誰でも見られる状態になるため、**Private推奨**です。

### Q: 複数のアプリで同じリポジトリを使える？

はい、同じトークンとリポジトリ設定を使えば、複数デバイスでデータを共有できます。

### Q: データのバックアップはどうなる？

GitHubがバージョン管理してくれるので、過去のデータも復元可能です。リポジトリの「Commits」から履歴を確認できます。

## 次のステップ

設定が完了したら、アプリを使い始めましょう！

- データは自動的にGitHubに保存されます
- 別のデバイスでも同じ設定をすれば、データが同期されます

